# REST API Interview Cheat Sheet

## Core Concepts

**REST**: Representational State Transfer
**Resource**: Any data or object (users, posts, products)
**Endpoint**: URL that represents a resource
**HTTP Methods**: GET, POST, PUT, PATCH, DELETE
**Stateless**: Each request independent, no session on server
**Client-Server**: Separation of concerns
**Cacheable**: Responses can be cached
**Uniform Interface**: Consistent API design

## HTTP Methods

### GET - Retrieve Resource
```http
GET /api/users              # Get all users
GET /api/users/123          # Get user by ID
GET /api/users?page=2&limit=10  # With query parameters
GET /api/users/123/posts    # Nested resource

# Response: 200 OK
{
  "id": 123,
  "name": "John Doe",
  "email": "john@example.com"
}
```

### POST - Create Resource
```http
POST /api/users
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john@example.com"
}

# Response: 201 Created
Location: /api/users/124
{
  "id": 124,
  "name": "John Doe",
  "email": "john@example.com",
  "createdAt": "2025-01-01T00:00:00Z"
}
```

### PUT - Replace Resource
```http
PUT /api/users/123
Content-Type: application/json

{
  "name": "John Smith",
  "email": "john.smith@example.com"
}

# Response: 200 OK or 204 No Content
{
  "id": 123,
  "name": "John Smith",
  "email": "john.smith@example.com",
  "updatedAt": "2025-01-01T00:00:00Z"
}
```

### PATCH - Partial Update
```http
PATCH /api/users/123
Content-Type: application/json

{
  "email": "newemail@example.com"
}

# Response: 200 OK
{
  "id": 123,
  "name": "John Doe",
  "email": "newemail@example.com",
  "updatedAt": "2025-01-01T00:00:00Z"
}
```

### DELETE - Remove Resource
```http
DELETE /api/users/123

# Response: 204 No Content or 200 OK
{
  "message": "User deleted successfully"
}
```

## HTTP Status Codes

### Success (2xx)
```
200 OK                  # Successful GET, PUT, PATCH, DELETE
201 Created             # Successful POST
202 Accepted            # Request accepted, processing async
204 No Content          # Successful, no response body
```

### Redirection (3xx)
```
301 Moved Permanently   # Resource permanently moved
302 Found               # Temporary redirect
304 Not Modified        # Cached version is still valid
```

### Client Errors (4xx)
```
400 Bad Request         # Invalid request
401 Unauthorized        # Authentication required
403 Forbidden           # Authenticated but not authorized
404 Not Found           # Resource doesn't exist
405 Method Not Allowed  # HTTP method not supported
409 Conflict            # Resource conflict (duplicate)
422 Unprocessable Entity # Validation errors
429 Too Many Requests   # Rate limit exceeded
```

### Server Errors (5xx)
```
500 Internal Server Error # Generic server error
502 Bad Gateway          # Invalid response from upstream
503 Service Unavailable  # Server temporarily down
504 Gateway Timeout      # Upstream server timeout
```

## URL Design Best Practices

### Resource Naming
```http
# Good: Use nouns, not verbs
GET /api/users
POST /api/users
GET /api/users/123

# Bad: Don't use verbs
GET /api/getUsers
POST /api/createUser

# Good: Use plural nouns
GET /api/users
GET /api/products

# Good: Nested resources
GET /api/users/123/posts
GET /api/posts/456/comments

# Good: Filtering, sorting, pagination
GET /api/users?role=admin&sort=name&page=2&limit=10
GET /api/products?category=electronics&minPrice=100

# Good: Search
GET /api/users/search?q=john
GET /api/search?type=user&query=john
```

### Versioning
```http
# URL versioning (most common)
GET /api/v1/users
GET /api/v2/users

# Header versioning
GET /api/users
Accept: application/vnd.myapi.v1+json

# Query parameter (not recommended)
GET /api/users?version=1
```

## Request Headers

```http
# Content type
Content-Type: application/json
Content-Type: application/xml
Content-Type: multipart/form-data

# Authentication
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
API-Key: your-api-key-here

# Accept (what client wants)
Accept: application/json
Accept: application/xml

# Caching
If-None-Match: "abc123"
If-Modified-Since: Wed, 21 Oct 2025 07:28:00 GMT

# CORS
Origin: https://example.com

# Custom headers
X-Request-ID: unique-id-123
X-Client-Version: 1.0.0
```

## Response Headers

```http
# Content type
Content-Type: application/json; charset=utf-8

# Caching
Cache-Control: max-age=3600, public
Cache-Control: no-cache, no-store, must-revalidate
ETag: "abc123"
Last-Modified: Wed, 21 Oct 2025 07:28:00 GMT

# CORS
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE
Access-Control-Allow-Headers: Content-Type, Authorization

# Rate limiting
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1609459200

# Pagination
Link: </api/users?page=3>; rel="next"
X-Total-Count: 250
```

## Request/Response Examples

### Pagination
```http
GET /api/users?page=2&limit=10

Response:
{
  "data": [...],
  "pagination": {
    "page": 2,
    "limit": 10,
    "total": 250,
    "totalPages": 25,
    "hasNext": true,
    "hasPrevious": true
  },
  "links": {
    "self": "/api/users?page=2&limit=10",
    "first": "/api/users?page=1&limit=10",
    "prev": "/api/users?page=1&limit=10",
    "next": "/api/users?page=3&limit=10",
    "last": "/api/users?page=25&limit=10"
  }
}
```

### Filtering and Sorting
```http
GET /api/products?category=electronics&minPrice=100&maxPrice=500&sort=-price,name

Response:
{
  "data": [
    {
      "id": 1,
      "name": "Laptop",
      "price": 499.99,
      "category": "electronics"
    },
    {
      "id": 2,
      "name": "Tablet",
      "price": 299.99,
      "category": "electronics"
    }
  ],
  "meta": {
    "count": 2,
    "filters": {
      "category": "electronics",
      "minPrice": 100,
      "maxPrice": 500
    },
    "sort": "-price,name"
  }
}
```

### Error Response
```http
POST /api/users
Status: 422 Unprocessable Entity

{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed",
    "details": [
      {
        "field": "email",
        "message": "Email is required"
      },
      {
        "field": "age",
        "message": "Age must be at least 18"
      }
    ]
  },
  "timestamp": "2025-01-01T00:00:00Z",
  "path": "/api/users"
}
```

### Bulk Operations
```http
POST /api/users/bulk
Content-Type: application/json

{
  "users": [
    {"name": "User 1", "email": "user1@example.com"},
    {"name": "User 2", "email": "user2@example.com"}
  ]
}

Response: 207 Multi-Status
{
  "results": [
    {
      "status": 201,
      "data": {"id": 1, "name": "User 1"}
    },
    {
      "status": 422,
      "error": "Email already exists"
    }
  ]
}
```

## Authentication

### JWT Token
```http
POST /api/auth/login
{
  "email": "user@example.com",
  "password": "password123"
}

Response:
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "refresh_token_here",
  "expiresIn": 3600
}

# Use in subsequent requests
GET /api/users/me
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### API Key
```http
GET /api/users
Authorization: Bearer your-api-key-here
# or
X-API-Key: your-api-key-here
```

### OAuth 2.0
```http
# Authorization Code Flow
1. GET /oauth/authorize?client_id=xxx&redirect_uri=xxx&response_type=code
2. Redirect: https://client.com/callback?code=AUTH_CODE
3. POST /oauth/token
   {
     "grant_type": "authorization_code",
     "code": "AUTH_CODE",
     "client_id": "xxx",
     "client_secret": "xxx"
   }
4. Response: {"access_token": "...", "refresh_token": "..."}
```

## Rate Limiting

### Implementation
```http
GET /api/users
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1609459200

# When limit exceeded
Status: 429 Too Many Requests
Retry-After: 60

{
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Rate limit exceeded. Try again in 60 seconds."
  }
}
```

## HATEOAS (Hypermedia)

```json
{
  "id": 123,
  "name": "John Doe",
  "email": "john@example.com",
  "_links": {
    "self": {
      "href": "/api/users/123"
    },
    "posts": {
      "href": "/api/users/123/posts"
    },
    "update": {
      "href": "/api/users/123",
      "method": "PUT"
    },
    "delete": {
      "href": "/api/users/123",
      "method": "DELETE"
    }
  }
}
```

## Node.js/Express Implementation

### Basic Setup
```javascript
const express = require('express');
const app = express();

app.use(express.json());

// GET all users
app.get('/api/users', async (req, res) => {
  try {
    const { page = 1, limit = 10 } = req.query;
    const users = await User.find()
      .limit(limit * 1)
      .skip((page - 1) * limit);
    
    const count = await User.countDocuments();
    
    res.json({
      data: users,
      pagination: {
        page: parseInt(page),
        limit: parseInt(limit),
        total: count,
        totalPages: Math.ceil(count / limit)
      }
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// GET user by ID
app.get('/api/users/:id', async (req, res) => {
  try {
    const user = await User.findById(req.params.id);
    if (!user) {
      return res.status(404).json({ error: 'User not found' });
    }
    res.json(user);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// POST create
