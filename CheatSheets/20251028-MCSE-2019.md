# Windows Server 2019 Administration Cheat Sheet

## Core Concepts

**Windows Server 2019**: Microsoft's server operating system
**Server Roles**: Specific server functions (AD DS, IIS, DNS, DHCP)
**Features**: Additional capabilities (Failover Clustering, Backup)
**Server Core**: Command-line only installation (smaller footprint)
**Desktop Experience**: GUI-based installation
**Domain Controller**: Server managing Active Directory
**Group Policy**: Centralized configuration management

## Installation & Initial Configuration

### Installation Options
```
1. Desktop Experience (GUI)
   - Full graphical interface
   - Easier for beginners
   - Larger disk footprint (~10GB)
   
2. Server Core (Recommended)
   - Command-line only
   - Smaller attack surface
   - Less resource usage (~4GB)
   - Remote management via RSAT
```

### Initial Configuration (Server Core)
```powershell
# Configure computer name
Rename-Computer -NewName "DC01" -Restart

# Configure IP address
New-NetIPAddress -InterfaceAlias "Ethernet" `
    -IPAddress 192.168.1.10 `
    -PrefixLength 24 `
    -DefaultGateway 192.168.1.1

# Set DNS servers
Set-DnsClientServerAddress -InterfaceAlias "Ethernet" `
    -ServerAddresses 192.168.1.10,8.8.8.8

# Configure Windows Update
sconfig  # Server Configuration tool

# Enable Remote Desktop
Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server' `
    -name "fDenyTSConnections" -Value 0
Enable-NetFirewallRule -DisplayGroup "Remote Desktop"

# Configure time zone
Set-TimeZone -Name "Central European Standard Time"

# Join domain (workstation)
Add-Computer -DomainName "contoso.com" -Restart

# Check Windows version
Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion
```

## Active Directory Domain Services (AD DS)

### Installing AD DS Role
```powershell
# Install AD DS role
Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools

# Promote to Domain Controller (new forest)
Install-ADDSForest `
    -DomainName "contoso.com" `
    -DomainNetbiosName "CONTOSO" `
    -ForestMode "WinThreshold" `
    -DomainMode "WinThreshold" `
    -InstallDns `
    -SafeModeAdministratorPassword (ConvertTo-SecureString "P@ssw0rd!" -AsPlainText -Force) `
    -Force

# Promote to Domain Controller (existing domain)
Install-ADDSDomainController `
    -DomainName "contoso.com" `
    -InstallDns `
    -Credential (Get-Credential) `
    -SafeModeAdministratorPassword (ConvertTo-SecureString "P@ssw0rd!" -AsPlainText -Force)

# Verify AD DS installation
Get-ADDomain
Get-ADForest
```

### User Management
```powershell
# Create new user
New-ADUser -Name "John Doe" `
    -GivenName "John" `
    -Surname "Doe" `
    -SamAccountName "jdoe" `
    -UserPrincipalName "jdoe@contoso.com" `
    -Path "OU=Users,DC=contoso,DC=com" `
    -AccountPassword (ConvertTo-SecureString "P@ssw0rd123!" -AsPlainText -Force) `
    -Enabled $true `
    -ChangePasswordAtLogon $true

# Modify user
Set-ADUser -Identity "jdoe" `
    -Department "IT" `
    -Title "System Administrator" `
    -EmailAddress "jdoe@contoso.com"

# Disable user
Disable-ADAccount -Identity "jdoe"

# Enable user
Enable-ADAccount -Identity "jdoe"

# Reset password
Set-ADAccountPassword -Identity "jdoe" `
    -NewPassword (ConvertTo-SecureString "NewP@ssw0rd!" -AsPlainText -Force) `
    -Reset

# Unlock account
Unlock-ADAccount -Identity "jdoe"

# Delete user
Remove-ADUser -Identity "jdoe" -Confirm:$false

# Get user information
Get-ADUser -Identity "jdoe" -Properties *

# Find locked out users
Search-ADAccount -LockedOut

# Find disabled users
Search-ADAccount -AccountDisabled

# Bulk user creation from CSV
Import-Csv "users.csv" | ForEach-Object {
    New-ADUser -Name $_.Name `
        -SamAccountName $_.Username `
        -UserPrincipalName "$($_.Username)@contoso.com" `
        -AccountPassword (ConvertTo-SecureString $_.Password -AsPlainText -Force) `
        -Enabled $true
}
```

### Group Management
```powershell
# Create security group
New-ADGroup -Name "IT Department" `
    -GroupScope Global `
    -GroupCategory Security `
    -Path "OU=Groups,DC=contoso,DC=com" `
    -Description "IT Department Staff"

# Add user to group
Add-ADGroupMember -Identity "IT Department" -Members "jdoe"

# Remove user from group
Remove-ADGroupMember -Identity "IT Department" -Members "jdoe" -Confirm:$false

# Get group members
Get-ADGroupMember -Identity "IT Department"

# Get user's group memberships
Get-ADPrincipalGroupMembership -Identity "jdoe"

# Create distribution group
New-ADGroup -Name "Sales Team" `
    -GroupScope Universal `
    -GroupCategory Distribution
```

### Organizational Units (OUs)
```powershell
# Create OU
New-ADOrganizationalUnit -Name "Departments" `
    -Path "DC=contoso,DC=com" `
    -ProtectedFromAccidentalDeletion $true

# Create nested OU
New-ADOrganizationalUnit -Name "IT" `
    -Path "OU=Departments,DC=contoso,DC=com"

# Move user to OU
Move-ADObject -Identity "CN=John Doe,CN=Users,DC=contoso,DC=com" `
    -TargetPath "OU=IT,OU=Departments,DC=contoso,DC=com"

# Delete OU (remove protection first)
Set-ADOrganizationalUnit -Identity "OU=IT,OU=Departments,DC=contoso,DC=com" `
    -ProtectedFromAccidentalDeletion $false
Remove-ADOrganizationalUnit -Identity "OU=IT,OU=Departments,DC=contoso,DC=com" -Confirm:$false
```

### Group Policy (GPO)
```powershell
# Import Group Policy module
Import-Module GroupPolicy

# Create new GPO
New-GPO -Name "Password Policy" -Comment "Domain password requirements"

# Link GPO to OU
New-GPLink -Name "Password Policy" -Target "OU=Departments,DC=contoso,DC=com"

# Get all GPOs
Get-GPO -All

# Get GPO report
Get-GPOReport -Name "Password Policy" -ReportType Html -Path "C:\GPOReport.html"

# Backup GPO
Backup-GPO -Name "Password Policy" -Path "C:\GPOBackups"

# Restore GPO
Restore-GPO -Name "Password Policy" -Path "C:\GPOBackups"

# Force Group Policy update on client
gpupdate /force

# View applied GPOs
gpresult /r
gpresult /h report.html
```

### Common GPO Settings
```
Computer Configuration:
├─ Windows Settings
│  ├─ Security Settings
│  │  ├─ Account Policies
│  │  │  ├─ Password Policy (complexity, length, age)
│  │  │  └─ Account Lockout Policy (threshold, duration)
│  │  ├─ Local Policies
│  │  │  ├─ Audit Policy
│  │  │  ├─ User Rights Assignment
│  │  │  └─ Security Options
│  │  └─ Windows Firewall
│  └─ Scripts (Startup/Shutdown)
└─ Administrative Templates
   ├─ System (disable USB, etc.)
   └─ Windows Components

User Configuration:
├─ Windows Settings
│  ├─ Scripts (Logon/Logoff)
│  └─ Folder Redirection
└─ Administrative Templates
   ├─ Desktop settings
   ├─ Start Menu and Taskbar
   └─ System (disable Control Panel)
```

## Internet Information Services (IIS)

### Installing IIS
```powershell
# Install IIS with common features
Install-WindowsFeature -Name Web-Server -IncludeManagementTools

# Install IIS with all features
Install-WindowsFeature -Name Web-Server -IncludeAllSubFeature -IncludeManagementTools

# Specific features
Install-WindowsFeature Web-Asp-Net45, Web-Windows-Auth, Web-Mgmt-Console
```

### IIS Management
```powershell
# Import WebAdministration module
Import-Module WebAdministration

# List websites
Get-Website

# Create new website
New-Website -Name "MyWebsite" `
    -Port 80 `
    -PhysicalPath "C:\inetpub\wwwroot\mysite" `
    -ApplicationPool "DefaultAppPool"

# Start/Stop website
Start-Website -Name "MyWebsite"
Stop-Website -Name "MyWebsite"

# Remove website
Remove-Website -Name "MyWebsite"

# Create application pool
New-WebAppPool -Name "MyAppPool"

# Configure application pool
Set-ItemProperty IIS:\AppPools\MyAppPool -Name managedRuntimeVersion -Value "v4.0"
Set-ItemProperty IIS:\AppPools\MyAppPool -Name processModel.identityType -Value 3

# Start/Stop application pool
Start-WebAppPool -Name "MyAppPool"
Stop-WebAppPool -Name "MyAppPool"

# Create virtual directory
New-WebVirtualDirectory -Site "Default Web Site" `
    -Name "vdir" `
    -PhysicalPath "C:\Content"

# Bindings
New-WebBinding -Name "MyWebsite" -Protocol http -Port 8080 -IPAddress "*"
New-WebBinding -Name "MyWebsite" -Protocol https -Port 443 -IPAddress "*"

# SSL Certificate
New-SelfSignedCertificate -DnsName "www.contoso.com" -CertStoreLocation Cert:\LocalMachine\My
$cert = Get-ChildItem -Path Cert:\LocalMachine\My | Where-Object {$_.Subject -like "*contoso*"}
New-WebBinding -Name "MyWebsite" -Protocol https -Port 443
$binding = Get-WebBinding -Name "MyWebsite" -Protocol https
$binding.AddSslCertificate($cert.Thumbprint, "my")
```

### IIS Configuration Files
```xml
<!-- web.config -->
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <!-- Authentication -->
        <security>
            <authentication>
                <anonymousAuthentication enabled="false" />
                <windowsAuthentication enabled="true" />
            </authentication>
        </security>
        
        <!-- Default document -->
        <defaultDocument>
            <files>
                <add value="index.html" />
                <add value="default.aspx" />
            </files>
        </defaultDocument>
        
        <!-- Custom error pages -->
        <httpErrors errorMode="Custom">
            <remove statusCode="404" />
            <error statusCode="404" path="/error404.html" responseMode="File" />
        </httpErrors>
        
        <!-- URL Rewrite -->
        <rewrite>
            <rules>
                <rule name="HTTP to HTTPS" stopProcessing="true">
                    <match url="(.*)" />
                    <conditions>
                        <add input="{HTTPS}" pattern="off" />
                    </conditions>
                    <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration>
```

### IIS Best Practices
```
Security:
1. Remove unnecessary features/modules
2. Use HTTPS with valid certificates
3. Implement request filtering
4. Configure IP restrictions
5. Use Windows Authentication when possible
6. Regular security updates

Performance:
1. Enable output caching
2. Use compression
3. Configure application pool recycling
4. Monitor worker processes
5. Use CDN for static content
6. Optimize connection limits

Monitoring:
1. Enable IIS logging
2. Use Failed Request Tracing
3. Monitor application pool health
4. Set up performance counters
5. Configure health monitoring
```

## 802.1X Authentication (Network Access Control)

### Concepts
```
Components:
├─ Supplicant: Client device requesting access
├─ Authenticator: Network switch/AP enforcing policy
└─ Authentication Server: RADIUS (NPS) validating credentials

Process:
1. Supplicant connects to network
2. Authenticator requests credentials
3. Supplicant sends credentials to RADIUS
4. RADIUS validates against AD
5. Access granted or denied
```

### Network Policy Server (NPS/RADIUS)
```powershell
# Install NPS role
Install-WindowsFeature -Name NPAS -IncludeManagementTools

# Register NPS in Active Directory
netsh nps reset config

# Configure RADIUS client (switch/AP)
# Via GUI: NPS Console → RADIUS Clients → New

# PowerShell: Add RADIUS client
$secret = "SharedSecret123!"
netsh nps add client name="Switch01" `
    address="192.168.1.100" `
    sharedsecret=$secret `
    vendor="Cisco"
```

### 802.1X Configuration Steps

#### 1. Certificate Services (Required for EAP-TLS)
```powershell
# Install Certificate Authority
Install-WindowsFeature -Name AD-Certificate -IncludeManagementTools

# Configure CA
Install-AdcsCertificationAuthority -CAType EnterpriseRootCA `
    -CryptoProviderName "RSA#Microsoft Software Key Storage Provider" `
    -KeyLength 2048 `
    -HashAlgorithmName SHA256 `
    -ValidityPeriod Years `
    -ValidityPeriodUnits 10

# Auto-enroll certificate to computers
# GPO: Computer Configuration → Policies → Windows Settings → 
# Security Settings → Public Key Policies → Certificate Services Client - Auto-Enrollment
```

#### 2. Create Network Policies
```
NPS Console → Policies → Network Policies → New

Policy Name: 802.1X Wireless Access
Conditions:
  - Windows Groups: Domain Computers
  - NAS Port Type: Wireless - IEEE 802.11
  
Constraints:
  - Authentication Methods: Microsoft: Protected EAP (PEAP)
  - EAP Types: Secured password (EAP-MSCHAP v2)
  
Settings:
  - RADIUS Attributes
    - Tunnel-Type = Virtual LANs (VLAN)
    - Tunnel-Pvt-Group-ID = VLAN-ID

Grant Access if conditions met
```

#### 3. Configure Switch/AP (Cisco Example)
```cisco
! Enable AAA
aaa new-model

! RADIUS server
radius server NPS01
 address ipv4 192.168.1.10 auth-port 1812 acct-port 1813
 key SharedSecret123!

! AAA authentication
aaa authentication dot1x default group radius

! Enable 802.1X on interface
interface GigabitEthernet0/1
 description User Port
 switchport mode access
 switchport access vlan 10
 authentication port-control auto
 dot1x pae authenticator
```

#### 4. Client Configuration (Windows)
```powershell
# Configure wired 802.1X via GPO
# Computer Configuration → Policies → Windows Settings → 
# Security Settings → Wired Network (IEEE 802.3) Policies

# Configure wireless 802.1X via GPO
# Computer Configuration → Policies → Windows Settings → 
# Security Settings → Wireless Network (IEEE 802.11) Policies

# Manual client configuration
netsh lan add profile filename="802.1x-profile.xml"
```

#### 5. 802.1X Profile XML
```xml
<?xml version="1.0"?>
<LANProfile xmlns="http://www.microsoft.com/networking/LAN/profile/v1">
    <MSM>
        <security>
            <OneXEnforced>true</OneXEnforced>
            <OneX xmlns="http://www.microsoft.com/networking/OneX/v1">
                <authMode>user</authMode>
                <EAPConfig>
                    <EapHostConfig xmlns="http://www.microsoft.com/provisioning/EapHostConfig">
                        <EapMethod>
                            <Type xmlns="http://www.microsoft.com/provisioning/EapCommon">25</Type>
                            <VendorId xmlns="http://www.microsoft.com/provisioning/EapCommon">0</VendorId>
                            <VendorType xmlns="http://www.microsoft.com/provisioning/EapCommon">0</VendorType>
                        </EapMethod>
                        <Config xmlns="http://www.microsoft.com/provisioning/EapHostConfig">
                            <Eap xmlns="http://www.microsoft.com/provisioning/BaseEapConnectionPropertiesV1">
                                <Type>25</Type>
                                <EapType xmlns="http://www.microsoft.com/provisioning/MsPeapConnectionPropertiesV1">
                                    <ServerValidation>
                                        <DisableUserPromptForServerValidation>true</DisableUserPromptForServerValidation>
                                        <TrustedRootCA>THUMBPRINT_OF_CA_CERT</TrustedRootCA>
                                    </ServerValidation>
                                    <FastReconnect>true</FastReconnect>
                                    <InnerEapOptional>false</InnerEapOptional>
                                    <Eap xmlns="http://www.microsoft.com/provisioning/BaseEapConnectionPropertiesV1">
                                        <Type>26</Type>
                                        <EapType xmlns="http://www.microsoft.com/provisioning/MsChapV2ConnectionPropertiesV1">
                                            <UseWinLogonCredentials>true</UseWinLogonCredentials>
                                        </EapType>
                                    </Eap>
                                    <EnableQuarantineChecks>false</EnableQuarantineChecks>
                                    <RequireCryptoBinding>false</RequireCryptoBinding>
                                    <PeapExtensions>
                                        <PerformServerValidation xmlns="http://www.microsoft.com/provisioning/MsPeapConnectionPropertiesV2">true</PerformServerValidation>
                                        <AcceptServerName xmlns="http://www.microsoft.com/provisioning/MsPeapConnectionPropertiesV2">true</AcceptServerName>
                                    </PeapExtensions>
                                </EapType>
                            </Eap>
                        </Config>
                    </EapHostConfig>
                </EAPConfig>
            </OneX>
        </security>
    </MSM>
</LANProfile>
```

### 802.1X Troubleshooting
```powershell
# View NPS logs
Get-Content "C:\Windows\System32\LogFiles\IN*.log"

# Enable NPS event logging
Set-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\NPS\Parameters" `
    -Name "EnableAccountingEvent" -Value 1

# Test RADIUS connectivity
NPS Console → RADIUS Clients → Test Connection

# Client-side troubleshooting
netsh lan show interfaces
netsh lan show profiles
netsh wlan show interfaces
netsh wlan show profiles

# Event Viewer logs
Event Viewer → Applications and Services Logs → 
  Microsoft → Windows → Wired-AutoConfig/Wireless-AutoConfig
```

## DNS Server

### Installing DNS
```powershell
# Install DNS role
Install-WindowsFeature -Name DNS -IncludeManagementTools

# Configure DNS forwarders
Set-DnsServerForwarder -IPAddress 8.8.8.8, 8.8.4.4

# Create forward lookup zone
Add-DnsServerPrimaryZone -Name "contoso.com" -ReplicationScope "Forest"

# Create reverse lookup zone
Add-DnsServerPrimaryZone -NetworkID "192.168.1.0/24" -ReplicationScope "Forest"

# Add DNS A record
Add-DnsServerResourceRecordA -Name "web" -ZoneName "contoso.com" -IPv4Address "192.168.1.100"

# Add DNS CNAME record
Add-DnsServerResourceRecordCName -Name "www" -HostNameAlias "web.contoso.com" -ZoneName "contoso.com"

# Add DNS MX record
Add-DnsServerResourceRecordMX -Name "." -MailExchange "mail.contoso.com" -Preference 10 -ZoneName "contoso.com"

# Clear DNS cache
Clear-DnsServerCache

# Test DNS resolution
Resolve-DnsName "web.contoso.com"
nslookup web.contoso.com
```

## DHCP Server

### Installing DHCP
```powershell
# Install DHCP role
Install-WindowsFeature -Name DHCP -IncludeManagementTools

# Authorize DHCP server in AD
Add-DhcpServerInDC -DnsName "dc01.contoso.com" -IPAddress 192.168.1.10

# Create DHCP scope
Add-DhcpServerv4Scope -Name "LAN Scope" `
    -StartRange 192.168.1.100 `
    -EndRange 192.168.1.200 `
    -SubnetMask 255.255.255.0 `
    -State Active

# Set scope options
Set-DhcpServerv4OptionValue -ScopeId 192.168.1.0 `
    -Router 192.168.1.1 `
    -DnsServer 192.168.1.10 `
    -DnsDomain "contoso.com"

# Create DHCP reservation
Add-DhcpServerv4Reservation -ScopeId 192.168.1.0 `
    -IPAddress 192.168.1.50 `
    -ClientId "00-11-22-33-44-55" `
    -Description "Printer01"

# View leases
Get-DhcpServerv4Lease -ScopeId 192.168.1.0
```

## File Services

### File Shares
```powershell
# Create SMB share
New-SmbShare -Name "Shared" `
    -Path "D:\Shares\Shared" `
    -FullAccess "CONTOSO\Domain Admins" `
    -ChangeAccess "CONTOSO\Domain Users"

# Modify share permissions
Grant-SmbShareAccess -Name "Shared" -AccountName "CONTOSO\Sales" -AccessRight Change

# NTFS permissions
$acl = Get-Acl "D:\Shares\Shared"
$permission = "CONTOSO\Sales", "Modify", "ContainerInherit,ObjectInherit", "None", "Allow"
$rule = New-Object System.Security.AccessControl.FileSystemAccessRule $permission
$acl.SetAccessRule($rule)
Set-Acl "D:\Shares\Shared" $acl

# Remove share
Remove-SmbShare -Name "Shared" -Force

# DFS Namespace
Install-WindowsFeature -Name FS-DFS-Namespace -IncludeManagementTools
New-DfsnRoot -Path "\\contoso.com\Public" -TargetPath "\\DC01\Public" -Type DomainV2
```

## Windows Server Backup

### Backup Configuration
```powershell
# Install Windows Server Backup
Install-WindowsFeature -Name Windows-Server-Backup -IncludeManagementTools

# One-time backup
$policy = New-WBPolicy
$target = New-WBBackupTarget -VolumePath "E:"
Add-WBBackupTarget -Policy $policy -Target $target
$volume = Get-WBVolume -VolumePath "C:"
Add-WBVolume -Policy $policy -Volume $volume
Start-WBBackup -Policy $policy

# Scheduled backup
$policy = New-WBPolicy
$target = New-WBBackupTarget -VolumePath "E:"
Add-WBBackupTarget -Policy $policy -Target $target
$volume = Get-WBVolume -VolumePath "C:"
Add-WBVolume -Policy $policy -Volume $volume
$schedule = New-WBSchedule -Schedule 02:00
Set-WBSchedule -Policy $policy -Schedule $schedule
Set-WBPolicy -Policy $policy

# System State backup
wbadmin start systemstatebackup -backupTarget:E: -quiet

# Restore from backup
wbadmin get versions
wbadmin start systemstaterecovery -version:MM/DD/YYYY-HH:MM
```

## Performance Monitoring

### Performance Monitor
```powershell
# Create data collector set
$counters = @(
    "\Processor(_Total)\% Processor Time",
    "\Memory\Available MBytes",
    "\PhysicalDisk(_Total)\% Disk Time",
    "\Network Interface(*)\Bytes Total/sec"
)

New-PlaDataCollectorSet -Name "ServerPerf" `
    -SchedulesEnabled `
    -Counter $counters `
    -CounterSampleInterval 15 `
    -XmltemplateName "System Performance"

# Start data collector
Start-PlaDataCollectorSet -Name "ServerPerf"

# Resource Monitor
resmon

# Task Manager
taskmgr

# Get performance counters
Get-Counter "\Processor(_Total)\% Processor Time"
Get-Counter "\Memory\Available MBytes"
```

## Security Best Practices

### Hardening
```powershell
# Disable SMBv1 (vulnerable)
Set-SmbServerConfiguration -EnableSMB1Protocol $false

# Enable Windows Firewall
Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled True

# Audit policy
auditpol /set /category:"Logon/Logoff" /success:enable /failure:enable
auditpol /set /category:"Account Management" /success:enable /failure:enable

# Restrict RDP access
Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' `
    -name "UserAuthentication" -Value 1

# Disable unnecessary services
Get-Service | Where-Object {$_.Status -eq "Running" -and $_.StartType -eq "Automatic"} | Out-GridView

# Windows Defender
Update-MpSignature
Start-MpScan -ScanType QuickScan

# BitLocker
Enable-BitLocker -MountPoint "C:" -EncryptionMethod XtsAes256 -UsedSpaceOnlyEncryption -RecoveryPasswordProtector
```

### Patching
```powershell
# Windows Update
Install-Module PSWindowsUpdate -Force
Get-WindowsUpdate
Install-WindowsUpdate -AcceptAll -AutoReboot

# WSUS (Windows Server Update Services)
Install-WindowsFeature -Name UpdateServices -IncludeManagementTools
```

## Common Interview Questions

**Q: What is Active Directory?**
- Directory service by Microsoft
- Centralized authentication and authorization
- Stores users, computers, groups, OUs
- Hierarchical structure: Forest → Domain → OUs
- Uses Kerberos and LDAP protocols

**Q: Difference between domain and workgroup?**
- Domain: Centralized authentication, managed by DC
- Workgroup: Peer-to-peer, local authentication
- Domain: Group Policy, centralized management
- Workgroup: Limited scalability (max ~20 computers)

**Q: What are FSMO roles?**
- Schema Master: Schema modifications (forest-wide)
- Domain Naming Master: Add/remove domains (forest-wide)
- RID Master: Assigns RID pools to DCs (domain-wide)
- PDC Emulator: Time sync, password changes, legacy (domain-wide)
- Infrastructure Master: Cross-domain references (domain-wide)

**Q: Explain Group Policy processing order**
- LSDOU: Local → Site → Domain → OU
- Computer policies before user policies
- Last applied wins (unless enforced)
- Can use GPO enforcement and block inheritance

**Q: What is Server Core?**
- Minimal installation without GUI
- Smaller attack surface and footprint
- Better performance, less resource usage
- Managed remotely via PowerShell/RSAT
- Recommended for production

**Q: IIS Application Pool isolation?**
- Each app pool runs in separate w3wp.exe process
- Prevents one app from affecting others
- Can set identity (NetworkService, ApplicationPoolIdentity)
- Configure recycling, limits, and start mode

**Q: What is 802.1X?**
- Network Access Control standard
- Port-based authentication
- Components: Supplicant, Authenticator, Auth Server (RADIUS)
- Common methods: EAP-TLS, PEAP-MSCHAPv2, EAP-TTLS
- Requires certificates for EAP-TLS

**Q: Difference between authentication and authorization?**
- Authentication: Verify identity (who you are)
- Authorization: Verify permissions (what you can do)
- Example: Login = authentication, file access = authorization

**Q: What is DNS zone transfer?**
- Replication of DNS zone data between servers
- AXFR: Full zone transfer
- IXFR: Incremental zone transfer
- Should be restricted to authorized servers

**Q: How to troubleshoot DC replication?**
- repadmin /showrepl: Show replication status
- repadmin /replsummary: Summary of replication
- dcdiag: Comprehensive DC diagnostics
- Check DNS, time sync, network connectivity
- Event Viewer: Directory Service logs

**Q: What is a tombstone?**
- Deleted AD object marked for deletion
- Tombstone lifetime: 60-180 days (default 180)
- Prevents resurrection of deleted objects
- After expiry, object permanently deleted

**Q: Backup strategies?**
- Full: Complete backup of all data
- Incremental: Changes since last backup
- Differential: Changes since last full
- System State: AD, Registry, Boot files
- Test restores regularly!

**Q: Windows Server licensing?**
- Per core licensing (minimum 16 cores)
- Standard: Up to 2 VMs
- Datacenter: Unlimited VMs
- CALs: User or Device Client Access Licenses

**Q: What is a service account?**
- Account used by services/applications
- Managed Service Accounts (MSA): Auto password management
- Group Managed Service Accounts (gMSA): For multiple servers
- Virtual Accounts: Built-in, no password management
